(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,a){e.exports=a(249)},123:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"signUp",function(){return A}),a.d(n,"signOut",function(){return F}),a.d(n,"SignIn",function(){return R});var r=a(0),l=a.n(r),c=a(53),o=a.n(c),s=a(7),i=a(6),m=a(26),u=a(107),p=(a(118),a(119),a(120),a(123),a(252)),d=a(76),b={authenticated:"",errorMessage:""},h=Object(i.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_USER":return Object(d.a)({},e,{authenticated:t.payload});case"AUTH_ERROR":return Object(d.a)({},e,{errorMessage:t.payload});default:return e}},form:p.a}),f=a(9),g=a(10),v=a(12),E=a(11),y=a(13),O=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light text-white mb-3 border-light w-nav"},l.a.createElement(m.b,{className:"navbar-brand mr-0 mr-md-2 text-light border p-2",to:"/","aria-label":"pxmusic"},"PXMusic"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item active"},l.a.createElement(m.b,{className:"nav-link active",to:"/"},"Inicio")),l.a.createElement("li",null,l.a.createElement(m.b,{className:"nav-link active",to:"/generos/reggaeton"},"Reggaeton")),l.a.createElement("li",null,l.a.createElement(m.b,{className:"nav-link active",to:"/generos/variada"},"Musica Variada")),l.a.createElement("li",null,l.a.createElement(m.b,{className:"nav-link active",to:"/noticias"},"Noticias")))),l.a.createElement(m.b,{to:"/admin",className:"btn btn-light btn-sm"},"Admin")))}}]),t}(l.a.Component);var N=Object(s.b)(function(e){return{authenticated:e.auth.authenticated}})(O),j=a(34),w=a(15),k=a.n(w),x=a(24),S=a(30),C=a.n(S),U=function(){var e=Object(x.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("http://localhost:3000/api/music/all/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),I=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=U();console.log(e)}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h1",{className:"display-4"},"Welcome! "),l.a.createElement("div",{className:"alert alert-info py-3"},l.a.createElement("p",{className:"mt-4"},"Latest Music",l.a.createElement("br",null))))}}]),t}(l.a.Component),M=a(251),_=a(250),A=function(e,t){var a=e.email,n=e.password;return function(){var e=Object(x.a)(k.a.mark(function e(r){var l;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("http://localhost:3090/signup",{email:a,password:n});case 3:l=e.sent,r({type:"AUTH_USER",payload:l.data.token}),localStorage.setItem("token",l.data.token),t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r({type:"AUTH_ERROR",payload:"Email already registered"});case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()},F=function(){return localStorage.removeItem("token"),{type:"AUTH_USER",payload:""}},R=function(e,t){var a=e.email,n=e.password;return function(){var e=Object(x.a)(k.a.mark(function e(r){var l;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/users/login",{email:a,password:n});case 3:l=e.sent,console.log(l.data),r({type:"AUTH_USER",payload:l.data[1].token}),localStorage.setItem("token",l.data[1].token),t(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),r({type:"AUTH_ERROR",payload:"Invalid Credentials"});case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()},H=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.SignIn(e,function(){a.props.history.push("/admin")})},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.handleSubmit;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-8 mb-1"},l.a.createElement("h1",{className:"display-4"},"Admin Login"),l.a.createElement("form",{onSubmit:e(this.onSubmit)},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"InputEmail"},"Email address"),l.a.createElement(M.a,{type:"email",name:"email",component:"input",className:"form-control",id:"InputEmail","aria-describedby":"emailHelp",placeholder:"Enter email",autoComplete:"none"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"InputPassword"},"Password"),l.a.createElement(M.a,{name:"password",component:"input",type:"password",className:"form-control",id:"InputPassword",placeholder:"Password",autoComplete:"none"})),l.a.createElement("div",{className:"form-group form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"Check"}),l.a.createElement("label",{className:"form-check-label",htmlFor:"Check"},"Remember me")),this.props.errorMessage&&l.a.createElement("div",{className:"alert alert-danger"},this.props.errorMessage),l.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign In")))))}}]),t}(l.a.Component);var P=Object(i.d)(Object(s.b)(function(e){return{auth:e.auth,errorMessage:e.auth.errorMessage}},n),Object(_.a)({form:"SignIn"}))(H),T=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.signUp(e,function(){a.props.history.push("/feature")})},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.handleSubmit;return l.a.createElement("div",{className:"container"},l.a.createElement("h1",{className:"display-4"},"Sign Up with us!"),l.a.createElement("form",{onSubmit:e(this.onSubmit)},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"InputEmail"},"Email address"),l.a.createElement(M.a,{type:"email",name:"email",component:"input",className:"form-control",id:"InputEmail","aria-describedby":"emailHelp",placeholder:"Enter email",autoComplete:"none"}),l.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"InputPassword"},"Password"),l.a.createElement(M.a,{name:"password",component:"input",type:"password",className:"form-control",id:"InputPassword",placeholder:"Password",autoComplete:"none"})),l.a.createElement("div",{className:"form-group form-check"},l.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"Check"}),l.a.createElement("label",{className:"form-check-label",htmlFor:"Check"},"Remember me")),this.props.errorMessage&&l.a.createElement("div",{className:"alert alert-danger"},this.props.errorMessage),l.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign Up")))}}]),t}(l.a.Component);var D=Object(i.d)(Object(s.b)(function(e){return{auth:e.auth,errorMessage:e.auth.errorMessage}},n),Object(_.a)({form:"signup"}))(T),L=function(e){var t=function(t){function a(){return Object(f.a)(this,a),Object(v.a)(this,Object(E.a)(a).apply(this,arguments))}return Object(y.a)(a,t),Object(g.a)(a,[{key:"componentDidMount",value:function(){this.isLoggedIn()}},{key:"componentDidUpdate",value:function(){this.isLoggedIn()}},{key:"isLoggedIn",value:function(){this.props.auth||this.props.history.push("/login")}},{key:"render",value:function(){return l.a.createElement(e,this.props)}}]),a}(l.a.Component);return Object(s.b)(function(e){return{auth:e.auth.authenticated}})(t)},J=L(function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("p",{className:"text-right"},l.a.createElement("a",{className:"btn btn-light",href:"/signout"},"Signout")),l.a.createElement("h1",null,"Feature Page"),l.a.createElement("p",null,"Only Loggedin users are allowed"))}}]),t}(l.a.Component)),W=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.signOut(),this.props.history.push("/")}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"SignOut Page"),l.a.createElement("p",null,"Only Loggedin users are allowed"))}}]),t}(l.a.Component),q=Object(s.b)(null,n)(W),B=a(31),V=function(){var e=Object(r.useState)(),t=Object(B.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)("Choose File"),o=Object(B.a)(c,2),s=o[0],i=o[1],m=Object(r.useState)(),u=Object(B.a)(m,2),p=u[0],d=u[1],b=Object(r.useState)(),h=Object(B.a)(b,2),f=h[0],g=h[1],v=Object(r.useState)(),E=Object(B.a)(v,2),y=E[0],O=E[1],N=Object(r.useState)(),j=Object(B.a)(N,2),w=j[0],S=j[1],U=Object(r.useState)(),I=Object(B.a)(U,2),M=I[0],_=I[1],A=function(){var e=Object(x.a)(k.a.mark(function e(t){var n,r,l;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData).append("file",a),n.append("title",p),n.append("artist",f),n.append("album",y),n.append("url",w),n.append("category",M),r={headers:{"Content-Type":"multipart/form-data"}},e.prev=9,e.next=12,C.a.post("/api/music/new",n,r);case 12:l=e.sent,console.log(l),F(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.log("there was an error",e.t0);case 20:case"end":return e.stop()}},e,null,[[9,17]])}));return function(t){return e.apply(this,arguments)}}(),F=function(){n([]),d(""),g(""),O(""),S(""),_("")},R=function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"title":return d(n);case"artist":return g(n);case"album":return O(n);case"url":return S(n);case"category":return _(n);default:return}};return l.a.createElement(r.Fragment,null,l.a.createElement("form",{onSubmit:A},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"song_title"},"*Song Title"),l.a.createElement("input",{name:"title",className:"form-control",placeholder:"Song itle",id:"song_title",type:"text",value:p,onChange:R})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"song_artist"},"*Artist"),l.a.createElement("input",{name:"artist",className:"form-control",placeholder:"Artist",id:"song_artist",type:"text",value:f,onChange:R})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"song_album"},"Album"),l.a.createElement("input",{name:"album",className:"form-control",placeholder:"album",id:"song_album",type:"text",value:y,onChange:R})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"song_url"},"*Mp3 Url"),l.a.createElement("input",{name:"url",className:"form-control",placeholder:"mp3 Url",id:"song_url",type:"textarea",value:w,onChange:R})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"song_category"},"*Category"),l.a.createElement("input",{name:"category",className:"form-control",placeholder:"Category",id:"song_category",type:"textarea",value:M,onChange:R})),l.a.createElement("div",{className:"custom-file"},l.a.createElement("input",{type:"file",className:"custom-file-input",id:"img",name:"file",onChange:function(e){n(e.target.files[0]),i(e.target.files[0].name)}}),l.a.createElement("label",{className:"custom-file-label",htmlFor:"file"},s)),l.a.createElement("div",{className:"row my-2 text-right "},l.a.createElement("div",{className:"col-12 d-flex"},l.a.createElement("small",null,"*required fields")),l.a.createElement("div",{className:"col-12"},l.a.createElement("button",{type:"submit",className:"btn btn-success text-right mb-3"},l.a.createElement("i",{className:""},"Upload"))))))},X=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={showUpload:!0},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"uploadSong",value:function(){var e=Object(x.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{"",console.log(""),this.props.destroy()}catch(a){console.log("there was an error")}case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row border justify-content-center d-flex align-content-center"},l.a.createElement("div",{className:"col-sm-6 text-center"},l.a.createElement("h1",{className:"display-4 mx-auto"},"Admin ")),l.a.createElement("div",{className:"col-sm-6 my-auto"},l.a.createElement("p",{className:"text-right my-auto text-center"},l.a.createElement("a",{className:"btn btn-dark",href:"/signout"},"Signout")))),l.a.createElement("div",{className:"row mt-3"},l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("h2",{className:"text-center"},"Top Downloads")),l.a.createElement("div",{className:"col-sm-6 text-center"},this.state.showUpload?l.a.createElement("button",{onClick:function(){e.setState({showUpload:!e.state.showUpload})},className:"btn btn-primary text-center"},"Hide"):l.a.createElement("button",{onClick:function(){e.setState({showUpload:!e.state.showUpload})},className:"btn btn-primary text-center"},"Upload New"))),this.state.showUpload&&l.a.createElement(V,{onUploadSubmit:function(t){e.uploadSong(t)}}))}}]),t}(l.a.Component);var z=Object(s.b)(function(e){return{auth:e.auth.authenticated}})(L(X)),G=function(){return l.a.createElement("div",null,l.a.createElement(N,null),l.a.createElement(j.a,{exact:!0,path:"/",component:I}),l.a.createElement(j.a,{path:"/admin",component:z}),l.a.createElement(j.a,{path:"/login",component:P}),l.a.createElement(j.a,{path:"/signup",component:D}),l.a.createElement(j.a,{path:"/feature",component:J}),l.a.createElement(j.a,{path:"/signout",component:q}))},K=Object(i.e)(h,{auth:{authenticated:localStorage.getItem("token")}},Object(i.a)(u.a));o.a.render(l.a.createElement(s.a,{store:K},l.a.createElement(m.a,{basename:"/home"},l.a.createElement(G,null))),document.getElementById("root"))}},[[110,1,2]]]);
//# sourceMappingURL=main.a55bcef4.chunk.js.map